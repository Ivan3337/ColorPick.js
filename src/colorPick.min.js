(function(a){a.fn.colorPick=function(b){return this.each(function(){new a.colorPick(this,b||{})})};a.colorPick=function(b,c){c=c||{};this.options=a.extend({},a.fn.colorPick.defaults,c);c.str&&(this.options.str=a.extend({},a.fn.colorpickr.defaults.str,c.str));a.fn.colorPick.defaults=this.options;this.color=this.options.initialColor;this.element=a(b);return this.element.hasClass(this.options.pickrclass)?this:this.init()};a.fn.colorPick.defaults={initialColor:"#3498db",allowRecent:!0,recentMax:5,palette:"#1abc9c #16a085 #2ecc71 #27ae60 #3498db #2980b9 #9b59b6 #8e44ad #34495e #2c3e50 #f1c40f #f39c12 #e67e22 #d35400 #e74c3c #c0392b #ecf0f1 #bdc3c7 #95a5a6 #7f8c8d".split(" "),
onColorSelected:function(){this.element.css({backgroundColor:this.color,color:this.color})}};a.colorPick.prototype={init:function(){var b=this;a.proxy(a.fn.colorPick.defaults.onColorSelected,this)();this.element.click(function(c){c.preventDefault();b.show(c.pageX,c.pageY);a(".colorPickButton").click(function(c){b.color=a(c.target).attr("hexValue");b.appendToStorage(a(c.target).attr("hexValue"));b.hide();a.proxy(b.options.onColorSelected,b)();return!1});return!1}).blur(function(){b.element.val(b.color);
a.proxy(b.options.onColorSelected,b)();b.hide();return!1});a(document).on("click",function(a){b.hide();return!0});return this},appendToStorage:function(b){if(!0===a.fn.colorPick.defaults.allowRecent){var c=JSON.parse(localStorage.getItem("colorPickRecentItems"));null==c&&(c=[]);-1==a.inArray(b,c)&&(c.unshift(b),c=c.slice(0,a.fn.colorPick.defaults.recentMax),localStorage.setItem("colorPickRecentItems",JSON.stringify(c)))}},show:function(b,c){a("#colorPick").remove();a("body").append('<div id="colorPick" style="display:none;top:'+
c+"px;left:"+b+'px"><span>Default palette:</span></div>');jQuery.each(a.fn.colorPick.defaults.palette,function(c,b){a("#colorPick").append('<div class="colorPickButton" hexValue="'+b+'" style="background:'+b+'"></div>')});!0===a.fn.colorPick.defaults.allowRecent&&(a("#colorPick").append('<span style="margin-top:5px">Recent:</span>'),null==JSON.parse(localStorage.getItem("colorPickRecentItems"))||JSON.parse(localStorage.getItem("colorPickRecentItems"))==[]?a("#colorPick").append('<div class="colorPickButton colorPickDummy"></div>'):
jQuery.each(JSON.parse(localStorage.getItem("colorPickRecentItems")),function(b,c){a("#colorPick").append('<div class="colorPickButton" hexValue="'+c+'" style="background:'+c+'"></div>');if(b==a.fn.colorPick.defaults.recentMax-1)return!1}));a("#colorPick").fadeIn(200)},hide:function(){a("#colorPick").fadeOut(200,function(){a("#colorPick").remove();return this})}}})(jQuery);