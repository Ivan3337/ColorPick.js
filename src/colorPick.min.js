(function(a){a.fn.colorPick=function(c){return this.each(function(){new a.colorPick(this,c||{})})};a.colorPick=function(c,b){b=b||{};this.options=a.extend({},a.fn.colorPick.defaults,b);b.str&&(this.options.str=a.extend({},a.fn.colorpickr.defaults.str,b.str));a.fn.colorPick.defaults=this.options;this.color=this.options.initialColor;this.element=a(c);var e=this.element.data("initialcolor");e&&(this.color=e,this.appendToStorage(this.color));var d=[];a.each(a.fn.colorPick.defaults.palette.map(function(a){return a.toUpperCase()}),
function(c,b){-1===a.inArray(b,d)&&d.push(b)});a.fn.colorPick.defaults.palette=d;return this.element.hasClass(this.options.pickrclass)?this:this.init()};a.fn.colorPick.defaults={initialColor:"#3498db",paletteLabel:"Default palette:",allowRecent:!0,recentMax:5,allowCustomColor:!1,palette:"#1abc9c #16a085 #2ecc71 #27ae60 #3498db #2980b9 #9b59b6 #8e44ad #34495e #2c3e50 #f1c40f #f39c12 #e67e22 #d35400 #e74c3c #c0392b #ecf0f1 #bdc3c7 #95a5a6 #7f8c8d".split(" "),onColorSelected:function(){this.element.css({backgroundColor:this.color,
color:this.color})}};a.colorPick.prototype={init:function(){var c=this;a.proxy(a.fn.colorPick.defaults.onColorSelected,this)();this.element.click(function(b){b.preventDefault();c.show(b.pageX,b.pageY);a(".customColorHash").val(c.color);a(".colorPickButton").click(function(b){c.color=a(b.target).attr("hexValue");c.appendToStorage(a(b.target).attr("hexValue"));c.hide();a.proxy(c.options.onColorSelected,c)();return!1});a(".customColorHash").click(function(a){return!1}).keyup(function(b){b=a(this).val();
0!==b.indexOf("#")&&(b="#"+b);/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(b)?(c.color=b,c.appendToStorage(b),a.proxy(c.options.onColorSelected,c)(),a(this).removeClass("error")):a(this).addClass("error")});return!1}).blur(function(){c.element.val(c.color);a.proxy(c.options.onColorSelected,c)();c.hide();return!1});a(document).on("click",function(a){c.hide();return!0});return this},appendToStorage:function(c){if(!0===a.fn.colorPick.defaults.allowRecent){var b=JSON.parse(localStorage.getItem("colorPickRecentItems"));
null==b&&(b=[]);-1==a.inArray(c,b)&&(b.unshift(c),b=b.slice(0,a.fn.colorPick.defaults.recentMax),localStorage.setItem("colorPickRecentItems",JSON.stringify(b)))}},show:function(c,b){a("#colorPick").remove();a("body").append('<div id="colorPick" style="display:none;top:'+b+"px;left:"+c+'px"><span>'+a.fn.colorPick.defaults.paletteLabel+"</span></div>");jQuery.each(a.fn.colorPick.defaults.palette,function(b,c){a("#colorPick").append('<div class="colorPickButton" hexValue="'+c+'" style="background:'+
c+'"></div>')});!0===a.fn.colorPick.defaults.allowCustomColor&&a("#colorPick").append('<input type="text" style="margin-top:5px" class="customColorHash" />');!0===a.fn.colorPick.defaults.allowRecent&&(a("#colorPick").append('<span style="margin-top:5px">Recent:</span>'),null==JSON.parse(localStorage.getItem("colorPickRecentItems"))||JSON.parse(localStorage.getItem("colorPickRecentItems"))==[]?a("#colorPick").append('<div class="colorPickButton colorPickDummy"></div>'):jQuery.each(JSON.parse(localStorage.getItem("colorPickRecentItems")),
function(b,c){a("#colorPick").append('<div class="colorPickButton" hexValue="'+c+'" style="background:'+c+'"></div>');if(b==a.fn.colorPick.defaults.recentMax-1)return!1}));a("#colorPick").fadeIn(200)},hide:function(){a("#colorPick").fadeOut(200,function(){a("#colorPick").remove();return this})}}})(jQuery);